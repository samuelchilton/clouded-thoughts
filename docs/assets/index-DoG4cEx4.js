var w=Object.defineProperty;var x=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var a=(e,t,n)=>x(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class b{constructor(t,n,i,s){a(this,"x");a(this,"y");a(this,"vx");a(this,"vy");a(this,"width");a(this,"height");a(this,"element");a(this,"isDragging",!1);a(this,"dragOffsetX",0);a(this,"dragOffsetY",0);this.x=t,this.y=n,this.vx=i,this.vy=s,this.width=600,this.height=480,this.element=document.createElement("div"),this.element.className="cloud",this.element.style.width=`${this.width}px`,this.element.style.height=`${this.height}px`,this.element.style.cursor="grab";const o=document.createElement("div");o.className="cloud-body",o.style.top="180px",this.element.appendChild(o);for(let r=1;r<=5;r++){const d=document.createElement("div");d.className=`cloud-puff cloud-puff-${r}`,this.element.appendChild(d)}const h=document.createElement("span");h.className="cloud-text",h.textContent="I am a cloud",this.element.appendChild(h),this.setupDragging(),this.updatePosition()}setupDragging(){this.element.addEventListener("mousedown",t=>{this.isDragging=!0,this.dragOffsetX=t.clientX-this.x,this.dragOffsetY=t.clientY-this.y,this.element.style.cursor="grabbing",t.preventDefault()}),document.addEventListener("mousemove",t=>{this.isDragging&&(this.x=t.clientX-this.dragOffsetX,this.y=t.clientY-this.dragOffsetY,this.updatePosition())}),document.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,this.element.style.cursor="grab")})}updatePosition(){this.element.style.transform=`translate(${this.x}px, ${this.y}px)`}update(){this.x+=this.vx,this.y+=this.vy,this.updatePosition()}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}}function P(e,t,n){let r,d,l=0;const c=100;do r=Math.random()*(e-600),d=Math.random()*(t-480),l++;while(l<c&&n.some(g=>{const v=Math.abs(g.x-r),y=Math.abs(g.y-d);return v<650&&y<530}));const p=Math.random()*Math.PI*2,m=.15+Math.random()*(.4-.15),u=Math.cos(p)*m,f=Math.sin(p)*m;return new b(r,d,u,f)}function M(e,t,n){const i=e.getBounds();i.left<=0&&(e.x=0,e.vx=Math.abs(e.vx)),i.right>=t&&(e.x=t-e.width,e.vx=-Math.abs(e.vx)),i.top<=0&&(e.y=0,e.vy=Math.abs(e.vy)),i.bottom>=n&&(e.y=n-e.height,e.vy=-Math.abs(e.vy))}function X(e,t){const n=e.getBounds();for(const i of t){const s=n.left<i.right&&n.right>i.left,o=n.top<i.bottom&&n.bottom>i.top;if(s&&o){const h=n.right-i.left,r=i.right-n.left,d=n.bottom-i.top,l=i.bottom-n.top,c=Math.min(h,r,d,l);c===h?(e.x=i.left-e.width,e.vx=-Math.abs(e.vx)):c===r?(e.x=i.right,e.vx=Math.abs(e.vx)):c===d?(e.y=i.top-e.height,e.vy=-Math.abs(e.vy)):(e.y=i.bottom,e.vy=Math.abs(e.vy))}}}const Y=3;class E{constructor(){a(this,"clouds",[]);a(this,"sky");a(this,"viewport");a(this,"canvasWidth");a(this,"canvasHeight");a(this,"blockElements",[]);a(this,"panX",0);a(this,"panY",0);a(this,"isPanning",!1);a(this,"panStartX",0);a(this,"panStartY",0);const t=document.getElementById("sky"),n=document.getElementById("viewport");if(!t||!n)throw new Error("Required elements not found");this.sky=t,this.viewport=n,this.canvasWidth=window.innerWidth*3,this.canvasHeight=window.innerHeight*3,this.panX=-window.innerWidth,this.panY=-window.innerHeight,this.updatePan(),this.init(),this.setupPanning(),this.setupRecenterButton(),this.setupResizeHandler(),this.startAnimationLoop()}setupRecenterButton(){const t=document.getElementById("recenter-btn");t&&t.addEventListener("click",()=>{this.panX=-window.innerWidth,this.panY=-window.innerHeight,this.updatePan()})}init(){this.blockElements=Array.from(document.querySelectorAll(".block"));for(let t=0;t<Y;t++){const n=P(this.canvasWidth,this.canvasHeight,this.clouds);this.clouds.push(n),this.sky.appendChild(n.element)}}getBlockBounds(){return this.blockElements.map(t=>{const n=t.getBoundingClientRect();return{left:n.left-this.panX,right:n.right-this.panX,top:n.top-this.panY,bottom:n.bottom-this.panY}})}setupPanning(){this.viewport.addEventListener("mousedown",t=>{(t.target.id==="viewport"||t.target.id==="sky")&&(this.isPanning=!0,this.panStartX=t.clientX-this.panX,this.panStartY=t.clientY-this.panY,this.viewport.classList.add("panning"),t.preventDefault())}),document.addEventListener("mousemove",t=>{if(this.isPanning){this.panX=t.clientX-this.panStartX,this.panY=t.clientY-this.panStartY;const n=0,i=-(this.canvasWidth-window.innerWidth),s=0,o=-(this.canvasHeight-window.innerHeight);this.panX=Math.max(i,Math.min(n,this.panX)),this.panY=Math.max(o,Math.min(s,this.panY)),this.updatePan()}}),document.addEventListener("mouseup",()=>{this.isPanning&&(this.isPanning=!1,this.viewport.classList.remove("panning"))})}updatePan(){this.sky.style.transform=`translate(${this.panX}px, ${this.panY}px)`}setupResizeHandler(){window.addEventListener("resize",()=>{this.canvasWidth=window.innerWidth*3,this.canvasHeight=window.innerHeight*3;const t=-(this.canvasWidth-window.innerWidth),n=-(this.canvasHeight-window.innerHeight);this.panX=Math.max(t,Math.min(0,this.panX)),this.panY=Math.max(n,Math.min(0,this.panY)),this.updatePan();for(const i of this.clouds)i.x+i.width>this.canvasWidth&&(i.x=this.canvasWidth-i.width),i.y+i.height>this.canvasHeight&&(i.y=this.canvasHeight-i.height),i.updatePosition()})}startAnimationLoop(){const t=()=>{const n=this.getBlockBounds();for(const i of this.clouds)i.isDragging||(i.update(),M(i,this.canvasWidth,this.canvasHeight),X(i,n),i.updatePosition());requestAnimationFrame(t)};requestAnimationFrame(t)}}new E;
